<%- include("../partials/header"); %>

<link rel="stylesheet" href="/stylesheets/index.css">

<%- include("../partials/navbar"); %>

<div class="container initial-container">
    <% if(currentUser){ %>
        <% if(currentUser.isAdmin){ %>
            <div class = "mb-5 text-right">
                <a href = "/products/new" class="ui button">New</a>
            </div>
        <% } %>
    <% } %>
    <div class="row">
        <% if(Object.entries(productDisplay).length !== 0){ %>
            <% productDisplay.forEach((category, index) => { %> 
                <div class = "box header">
                    <h2><%= category.name %></h2>
                    <div><%= category.byline %></div>
                </div>

                <% category.products.forEach(product => { %>
                    <div class="col-6 col-md-4 col-lg-3">
                        <div class="product">
                            <div>
                                <a href='/products/<%= product._id %>'>
                                    <img class="product-image" src = "<%= product.images[1].url %>">
                                </a>
                            </div>
                    
                            <div class = "product-details">
                                <div class = "product-name bold"><%= product.name %></div>
                    
                                <div class = "product-price bold">Rs <%= product.price %></div>
                            </div>
            
                            <div class = "product-details">
                                <div class = "product-size"><%= product.size %></div>
                    
                                <div class = "product-colour"><%= product.colour %></div>
                            </div>
                        </div>
                    </div>
                <% }) %>
            <% }) %>
        <% }else{ %>
            <div class = "col-12 text-center display-4">We don't have any products yet</div>
        <% } %>
    </div>
</div>

<%- include("../partials/footer"); %>
